<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Reaction Speed Trainer</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <!-- 1. Setup Screen -->
    <div id="setup-screen" class="screen active">
        <h1>Reaction Speed Trainer</h1>
        <p>レベルを選択してください</p>
        <div class="level-grid">
            <button class="btn" onclick="app.startLevel(1)">Lv.1 光反応</button>
            <button class="btn" onclick="app.startLevel(2)">Lv.2 音反応</button>
            <button class="btn" onclick="app.startLevel(3)">Lv.3 混合</button>
            <button class="btn" onclick="app.startLevel(4)">Lv.4 抑制</button>
            <button class="btn" onclick="app.startLevel(5)">Lv.5 計算</button>
            <button class="btn" onclick="app.startLevel(6)">Lv.6 複合</button>
        </div>
        <button class="btn btn-secondary" onclick="app.showRanking()">ランキングを見る</button>
    </div>

    <!-- 2. Game Screen -->
    <div id="game-screen" class="screen">
        <h2 id="level-title">Level X</h2>
        <div id="countdown" class="hidden">3</div>
        
        <div id="stimulus-area">
            <span id="stimulus-text">待機...</span>
            <div class="swipe-hint swipe-left hidden">← Swipe</div>
            <div class="swipe-hint swipe-right hidden">Swipe →</div>
        </div>

        <!-- Math Overlay (for Lv5, Lv6) -->
        <div id="math-overlay">
            <div id="math-problem">7 + 3 = ?</div>
            <div class="math-options" id="math-options">
                <!-- Buttons generated by JS -->
            </div>
        </div>
    </div>

    <!-- 3. Result Screen -->
    <div id="result-screen" class="screen">
        <h2>結果発表</h2>
        <div class="stat-box">
            <span>スコア</span>
            <strong id="res-score">0</strong>
        </div>
        <div class="stat-box">
            <span>平均反応時間</span>
            <strong id="res-avg">0 ms</strong>
        </div>
        <div class="stat-box">
            <span>正答率</span>
            <strong id="res-accuracy">0%</strong>
        </div>
        <div class="stat-box">
            <span>ミス回数</span>
            <strong id="res-miss">0</strong>
        </div>
        
        <button class="btn btn-large" onclick="app.retryLevel()">もう一度</button>
        <button class="btn btn-large btn-secondary" onclick="app.toTitle()">モード選択へ</button>
        <button class="btn btn-large btn-secondary" onclick="app.showRanking()">ランキング</button>
    </div>

    <!-- 4. Ranking Screen -->
    <div id="ranking-screen" class="screen">
        <h2>ランキング</h2>
        <div style="margin-bottom: 20px;">
            <select id="ranking-level-select" onchange="app.loadRanking(this.value)" style="font-size: 1.5rem; padding: 10px;">
                <option value="1">Level 1</option>
                <option value="2">Level 2</option>
                <option value="3">Level 3</option>
                <option value="4">Level 4</option>
                <option value="5">Level 5</option>
                <option value="6">Level 6</option>
            </select>
        </div>
        <div id="ranking-list">
            <!-- Table generated by JS -->
            <p>読み込み中...</p>
        </div>
        <button class="btn btn-secondary" onclick="app.toTitle()">戻る</button>
    </div>

    <script type="module" src="app.js"></script>
</body>
</html>
